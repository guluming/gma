<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>강모아 | 강의 모아 보기</title>
    <!-- bulma css -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src=" https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <style>
        .mainBox{
            width: 100%;
            height: 300px;

            background-image: linear-gradient(0deg, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0)), url('https://static.spartacodingclub.kr/media/main_carousel/xzp9hk1o96nbakca.png');
            background-position: center;
            background-size: cover;

            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        {#.mainBox{position:relative; width:100%; height:300px; text-align:center;}#}
        {#.mainBox::after{content:""; position:absolute; top:0; left:0; z-index:-1; opacity:.8; width:100%; height:300px; background: url('https://static.spartacodingclub.kr/media/main_carousel/xzp9hk1o96nbakca.png') center right / cover;}#}
        {#.mainBox h3{padding-top:100px; font-size:40px; font-weight:700; color:#000;}#}
        .mainBox p{
            font-size: 300pt;
            font-weight:700;
            color:#000;
        }
        .blind{display:none;}
        .columns{padding:20px 10px;}
        .columns > column{text-align:center;}
        .columns > column img{width:100%; max-width:300px;}
        .buttonBox{margin-top:20px; text-align:center;}
        .buttonBox button{margin:0 10px;}
    </style>
    <script>
        $(document).ready(function () {
            mainpage();
        });

        function mainpage() {
            $.ajax({
                type: 'GET',
                url: '/api/posts',
                data: {},
                success: function (response) {
                    let rows = response['posts']
                    for(let i =0; i<rows.length; i++){
                        let title = rows[i]['title']
                        let image = rows[i]['image']
                        let text = rows[i]['text']
                        let star = rows[i]['star']

                        console.log(title, text)

                        let star_image = '⭐'.repeat(star)

                        let temp_html = `<div class="column">
                                            <img src="${image}" alt=""><br /><br />
                                            <h3 class="title is-5">${star_image}</h3>
                                            <h1 class="title">${title}</h1>
                                            <p class="subtitle is-6">${text}</p>
                                        </div>`

                        $('.columns').append(temp_html)
                    }
                }
            })
        }

        function sign_out() {
            //로그아웃
            $.removeCookie('mytoken', {path: '/'});
            alert('로그아웃!')
            window.location.href = ('/login')
        }
    </script>
</head>
<body>
    <div id="wrap">
        <!-- bulma -->
        <nav class="navbar" role="navigation" aria-label="main navigation">
          <div class="navbar-brand">
            <a class="navbar-item" href="#">
            </a>

            <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasicExample">
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
              <span aria-hidden="true"></span>
            </a>
          </div>

          <div id="navbarBasicExample" class="navbar-menu">
            <div class="navbar-end">
              <div class="navbar-item">
                <div class="buttons">
                    <button class="button is-primary-light" onclick="sign_out()">로그아웃</button>
                </div>
              </div>
            </div>
          </div>
        </nav>

        <!-- main -->

        <div class="mainBox">
            <p class="title is-1">G M A</p>
            <p class="subtitle is-3">강의를 편하게 모아 보자!</p>
            <div class="buttonBox">
                <button class="button is-primary is-rounded is-large">강의 공유</button>
                <button class="button is-link is-rounded is-large">My Page</button>
            </div>
        </div>

        <!-- content -->
        <div class="columns">
        </div>

    </div>
</body>
</html>